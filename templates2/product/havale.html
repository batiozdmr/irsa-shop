{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% block seo %}

<title>{{ site_settings.header_text }}</title>
<meta name="keywords" content="{{ site_settings.keyword }}"/>
<meta name="description" content="{{ site_settings.description }}">
<meta name="author" content="{{ site_settings.header_text }}">

{% endblock seo %}
{% block extra_css %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'css/style.min.css' %}">
{% endblock extra_css %}

{% block content %}


    <!--Head Başla-->

    <div class="heading">
        <div class="container">
            <h3>{% trans "Ödeme ve Adres" %}</h3>
            <p><a href="#"> {% trans "Anasayfa" %}</a> / <a href="#"> {% trans "Ödeme ve Adres" %}</a></p>
        </div>
    </div>

    <!--Head Bitiş-->


    <!--Content Başla-->


    <div class="container">
        <div class="wrapper">

            <div class="row ship w-100">
                <div class="col-lg-8">
                    <style>
                        .nav-pills .nav-link.active, .nav-pills .show > .nav-link {
                            background-color: #193B64;
                        }

                        .nav-pills .nav-link {
                            color: #454545;
                        }
                    </style>
                    
                    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home"
                               role="tab"
                               aria-controls="pills-home" aria-selected="true">{% trans "KREDİ KARTI İLE ÖDEME" %}</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile"
                               role="tab"
                               aria-controls="pills-profile" aria-selected="false">{% trans "HAVALE İLE ÖDEME" %}</a>
                        </li>
                    </ul>

                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel"
                             aria-labelledby="pills-home-tab">
                            <h3>{% trans "Kart Bilgileri" %}</h3>
                            <form name="pay_form" id="odeme-form"
                                  method="post"
                                  action="{% url 'checkout/:odeme' %}">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlInput1">İsim</label>
                                            <input type="text" class="form-control" name="name" id="name"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlInput1">Kart Numarası</label>
                                            <input type="text" class="form-control" name="number" id="number">
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlInput1">Son Kullanma Tarihi</label>
                                            <input type="text" class="form-control" name="expiry" id="expiry"/>
                                        </div>
                                    </div>


                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlInput1">CVC</label>
                                            <input type="text" class="form-control" name="cvc" id="cvc"/>
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="card-body"></div>
                                    </div>

                                    <input type="hidden" name="amount" value="{{ amount }}"/>
                                    <input type="hidden" name="oid" value="{{ oid }}"/>


                                    <div class="col-md-12">


                                        <div class="" style="display:flex;align-items:center;margin:12px 0 !important;">
                                            <input id="my-input-1" class="form-check-input" type="checkbox" name=""
                                                   value="true"
                                                   style="margin:0;-webkit-appearance: checkbox !important; width:15px;height:15px;"
                                                   required="">
                                            <label for="my-input-1" class="form-check-label"
                                                   style="display:inline-block;margin:0 0 0 20px;">


                                                <p style="margin:0;"><a href="" class="info-link" data-toggle="modal"
                                                                        data-target="#exampleModal">
                                                    {% trans "Mesafeli Satış Sözleşmesi'ni okudum ve onaylıyorum." %}</a>
                                                </p>

                                            </label>


                                        </div>
                                    </div>
                                </div>
                                <button class="nextstep-buton">{% trans "Alışverişi Tamamla" %}</button>

                            </form>

                        </div>

                        <div class="tab-pane fade" id="pills-profile" role="tabpanel"
                             aria-labelledby="pills-profile-tab">
                            <h3>{% trans "Banka Bilgileri" %}</h3>
                            <h5 class="mt-3">{% trans "Banka Adı" %}</h5>
                            <hr>

                            {{ site_settings.bank_name }}
                            <hr>
                            <h5>{% trans "IBAN Numarası" %}</h5>
                            <p>{{ site_settings.bank_iban }}</p>
                            <hr>
                            <h5>{% trans "Şirket Unvanı" %}</h5>
                            <p>{{ site_settings.bank_account_name }}</p>
                            <hr>
                            <p><a href="" class="info-link" data-toggle="modal" data-target="#exampleModal">
                                {% trans "Gizlilik ve Mesafeli satış sözleşmesini onaylıyorum." %}</a></p>
                            <a href="/tr/checkout/payment/with/bank/" class="btn btn-order sub-alert-1 d-block"
                               style="background-color: #193b64; color: #fff">
                                {% trans "Alışverişi Tamamla" %}
                            </a>


                        </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title"
                                        id="exampleModalLabel">{% trans "Mesafeli Satış Sözleşmesi" %}</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    {{ site_settings.company_legal_3|safe }}
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal">{% trans "Kapat" %}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <style>
                    .summary {
                        padding: 2.8rem 3rem 2rem;
                        border: 1px solid #e1e1e1;
                        border-radius: 2px;
                    }

                    .summary-title {
                        color: #222;
                    }

                    .summary-subtitle {
                        font-size: 1.3rem;
                        padding: 1rem 0;
                    }

                    .summary-subtotal {
                        border-bottom: 1px solid #e1e1e1;
                        width: 100%;
                    }

                    p.summary-total-price {
                        font-size: 1.3rem;
                    }

                    .summary td:last-child, .summary th:last-child {
                        text-align: right;
                        min-width: 10rem;
                    }
                </style>
                <div class="col-lg-4">
                    <aside class="sticky-sidebar-wrapper">
                        <div class="sticky-sidebar" data-sticky-options="{'bottom': 20}">
                            <div class="summary mb-4">
                                <h3 class="summary-title text-left font-weight-bold">{% trans "Sepet Toplam" %}</h3>
                                <hr>


                                {% include 'partials/basket.html' %}


                            </div>
                        </div>
                    </aside>
                </div>


            </div>


        </div>
    </div>

    <!--
                    <div class="col-lg-12">
                        <form action="">
                            <p>Şifrenizi mi unuttunuz? E-posta adresinizi aşağıya girin, size sıfırlamanıza izin veren bir e-posta göndereceğiz. </p>
                        <p>E-Posta Adresi</p>
                        <input type="text" name="e-posta" id="">
                    </div>

                    <div class="col-lg-12 mt-3">
                        <button class="nextstep-buton">Şifremi Sıfırla</button>
                    </div>

                </form>
    -->

    <!--Content Bitiş-->


{% endblock content %}
{% block extra_script %}
    <script>

        $('.info-link').click(function () {

            var items = [];
            $($(this).attr('href')).find('.modal').each(function () {
                items.push({
                    src: $(this)
                });
            });

            $.magnificPopup.open({
                items: items,
                gallery: {
                    enabled: true
                }
            });
        });
    </script>
    <script>
        $('button.sub-alert-1').click(function () {

            Swal.fire({
                position: 'top-top',
                icon: 'success',
                title: '{% trans "Ödemeniz Başarıyla Alınmıştır." %}',
                customClass: 'swal-wide',
                showConfirmButton: false,
                timer: 3000
            })

        });
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
    <script src="{% static 'node_modules/card/dist/card.js' %}"></script>
    <script>
        var card = new Card({
            form: '#odeme-form',
            container: '.card-body',
            formSelectors: {
                numberInput: 'input#number',
                expiryInput: 'input#expiry',
                cvcInput: 'input#cvc',
                nameInput: 'input#name'
            },
            placeholders: {
                number: '•••• •••• •••• ••••',
                name: 'AD SOYAD',
                expiry: '••/••',
                cvc: '•••'
            }
        });
    </script>
{% endblock extra_script %}